{% extends 'base.html' %}

{% block title %}
  <title>ISBNで登録する</title>
{% endblock %}

{% block header %}
  
{% endblock %}

{% block content %}

  {% if isbn is none %}
  <form method="post">
    <label for="isbn">isbn</label>
    <input name="isbn" id="isbn" value="{{ request.form['isbn'] }}" required>
    <input type="submit" value="書籍情報を検索する">
  </form>

  {% else %}

  <div class="book-form">
    <form method="post">
      <div class="book-form-image">
        <img alt="{{ book_data['summary']['title'] }}" id="image" src="{{ book_data['summary']['cover'] }}">
      </div>

      <div class="book-form-text">
        <fieldset>
          <label for="isbn">ISBN</label>
          <input type="text" name="isbn" value="{{ book_data['summary']['isbn'] }}" id="isbn" required>

          <label for="c-code">Cコード</label>
          <input type="text" name="c-code" value="{{ book_data['onix']['DescriptiveDetail']['Subject'][0]['SubjectCode'] if 'Subject' in book_data['onix']['DescriptiveDetail'] }}" id="c-code">

          <label for="title">タイトル</label>
          <input type="text" name="title" value="{{ book_data['summary']['title'] }}" id="title" required>
      
          <label for="author">著者</label>
          <input type="text" name="author" value="{{ book_data['summary']['author'] }}" id="author">
          
          <label for="publisher_name">出版社</label>
          <input type="text" name="publisher_name" value="{{ book_data['summary']['publisher'] }}" id="publisher_name">
          
          <label for="sales_date">出版年月日</label>
          <input type="text" name="sales_date" value="{{ book_data['summary']['pubdate'] }}" id="sales_date">
                    
          <label for="genre">ジャンル</label>
          <select id="genre" name="genre">
            <option value="unset">---</option>
            <option value="general">一般</option>
            <option value="education">教養</option>
            <option value="practical-use">実用</option>
            <option value="specialty">専門</option>
            <option value="woman">婦人</option>
            <option value="elementary-school">学参I(小中)</option>
            <option value="high-school">学参II(高校)</option>
            <option value="child">児童</option>
            <option value="magazine">雑誌扱い</option>
          </select>      

          <label for="donor">寄贈者</label>
          <input type="text" name="donor" value="{{ g.user['username'] }}" id="donor">

        </fieldset>
      </div>
      <input type="submit" value="登録する" />
    </form>
  </div>

  {% endif %}

{% endblock %}