{% extends 'base.html' %}

{% block title %}
  <title>本を探す</title>
{% endblock %}

{% block header %}
  
{% endblock %}

{% block content %}

  <div class="stacked-section-child">
    <form method="post">
      <label for="keyword">keyword</label>
      <input name="keyword" id="keyword" value="{{ request.form['keyword'] }}" required>
      <input type="submit" value="検索する">
    </form>
  </div>

  {% if keyword is not none %}
    <div class="stacked-section-child">
      <div class="content-heading">
        <h4 class="section-title">
          検索結果
        </h4>
      </div>

      {% if results|length == 0 %}
      検索結果はありません。
      {% else %}
        <div class="book-list">
          {% for result in results %}
            <div class="book-container">
              <div class="book-image">
                <img alt="{{ result['title'] }}" id="image" src="{{ result['image_url'] }}">
              </div>
              <div class="book-info">
                <div class="book-title">
                  <a href="{{ url_for('book.index', book_id = result['id']) }}">{{ result['title'] }}</a>
                </div>
                <div class="book-author">
                  <p class="author">{{ result['author'] }}</p>
                </div>
              </div>
              <div class="book-category">
                <p class="category">小説</p>
              </div>
              <div class="book-status">
                <p class="status">この本を借りる</p>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div> 
  {% endif %}

{% endblock %}